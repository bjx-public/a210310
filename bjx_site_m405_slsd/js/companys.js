function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _construct(t,e,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(t,e,n){var a=[null];a.push.apply(a,e);a=new(Function.bind.apply(t,a));return n&&_setPrototypeOf(a,n.prototype),a}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}!function(){$(".bjx-copsDesc .fold").on("click",function(){$(".bjx-copsDesc").toggleClass("active")}),$(".bjx-copsInfo .js-attention").on("click",function(){var e,n=$(this);n.data("loading")||(n.data("loading",!0),e={cid:n.data("id"),act:+!n.hasClass("active")},$.ajax({url:"/api/attention_company/",type:"GET",data:e,cache:!1,dataType:"json"}).done(function(t){1===t.status?e.act?(msg_hint("关注成功",{type:"success"}),n.html("已关注").addClass("active")):(msg_hint("取消关注"),n.html("+关注").removeClass("active")):600===t.status?msg_confirm("登录后才能进行相关操作",{btn1_txt:"马上登录",btn1_fun:function(){location.href="/oidc/login/"}}):601===t.status&&(location.href=t.data)}).always(function(){n.data("loading",!1)}))});function e(n){function t(){n.click(function(){!function(t){var e=[];n.each(function(){e.push({src:this.src,w:800,h:450})});t={index:t+1,closeEl:!0,captionEl:!0,fullscreenEl:!1,zoomEl:!1,shareEl:!1,counterEl:!0,arrowEl:!0,preloaderEl:!0};new PhotoSwipe($(".pswp")[0],PhotoSwipeUI_Default,e,t).init()}(n.index(this))})}$("body").append('<div class="pswp" tabindex="-1" role="dialog" aria-hdden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button><button class="pswp__button pswp__button--share" title="Share"></button><button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button><button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button><button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div>'),$("head").append('<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">'),$("head").append('<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">'),$.getScript("https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js",function(){$.getScript("https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js",function(){t()})})}$(function(){var t=$(".bjx-copsEnv img");t.length&&e(t)}),function(){var t=$(".bjx-copsAddr .body li");if(0===t.length)return console.log("无需初始化地图");function o(t,e,n){i=n,s=e,r=_construct(AMap.LngLat,_toConsumableArray(t.split(",").map(function(t){return+t}).slice(0,2))),p&&p.destroy(),p=new AMap.Map("map_container",{resizeEnable:!0,center:r,zoom:16}),new AMap.Marker({map:p,position:r,anchor:"bottom-center"}),p.on("complete",function(){p.plugin("AMap.Geolocation",function(){var t=new AMap.Geolocation({position:"LB",timeout:1e4,offset:[20,20],showButton:!1,showCircle:!1,panToLocation:!1,needAddress:!0});p.addControl(t),t.getCurrentPosition(function(t,e){"complete"===t&&"SUCCESS"===e.info?(c=e.position,(t=AMap.GeometryUtil.distance(r,c))<1e3?$(".drawer-map").find(".js-dist").text("距离"+parseInt(t)+"米"):$(".drawer-map").find(".js-dist").text("距离"+(t/1e3).toFixed(1)+"千米"),new AMap.Marker({map:p,position:c,content:"<div></div>",anchor:"bottom-center"}),p.setFitView(),a(e.addressComponent.city||e.addressComponent.province)):console.log("暂时无法定位")})})});var a=function(t){p.plugin("AMap.Driving",function(){(new AMap.Driving).search(c,r,function(t,e){var n;"complete"===t&&"OK"===e.info?(n=(d[0]=e).routes[0].time||0,n=((t=parseInt(n/3600))?t+"小时":"")+((t=parseInt(n%3600/60))?t+"分钟":"")+((n=n%60)?n+"秒":""),$(".drawer-map").find(".js-deive-time").text(n)):console.error("获取驾车数据失败："+e)})}),p.plugin("AMap.Transfer",function(){new AMap.Transfer({city:t,autoFitView:!0}).search(c,r,function(t,e){var n;"complete"===t?(n=(d[1]=e).plans[0].time||0,n=((t=parseInt(n/3600))?t+"小时":"")+((t=parseInt(n%3600/60))?t+"分钟":"")+((n=n%60)?n+"秒":""),$(".drawer-map").find(".js-bus-time").text(n)):console.error("公交路线数据查询失败"+e)})}),p.plugin("AMap.Walking",function(){(new AMap.Walking).search(c,r,function(t,e){var n;"complete"===t&&"ok"===e.info?(n=(d[2]=e).routes[0].time||0,n=((t=parseInt(n/3600))?t+"小时":"")+((t=parseInt(n%3600/60))?t+"分钟":"")+((n=n%60)?n+"秒":""),$(".drawer-map").find(".js-walk-time").text(n)):console.error("步行路线数据查询失败"+e)})})}}function n(t){var e,n;p.clearMap(),n=function(t){for(var e=[],n=0,a=t.steps.length;n<a;n++)for(var o=t.steps[n],i=0,s=o.path.length;i<s;i++)e.push(o.path[i]);return e}(e=t),t=new AMap.Marker({position:n[0],icon:"https://webapi.amap.com/theme/v1.3/markers/n/start.png",map:p,anchor:"bottom-center"}),e=new AMap.Marker({position:n[n.length-1],icon:"https://webapi.amap.com/theme/v1.3/markers/n/end.png",map:p,anchor:"bottom-center"}),n=new AMap.Polyline({path:n,isOutline:!0,outlineColor:"#ffeeee",borderWeight:2,strokeWeight:5,strokeOpacity:.9,strokeColor:"#0091ff",lineJoin:"round"}),p.add(n),p.setFitView([t,e,n])}function a(t){p.clearMap(),function(t){for(var e=new AMap.Marker({position:t.segments[0].transit.origin,icon:"https://webapi.amap.com/theme/v1.3/markers/n/start.png",map:p,anchor:"bottom-center"}),n=new AMap.Marker({position:t.segments[t.segments.length-1].transit.destination,icon:"https://webapi.amap.com/theme/v1.3/markers/n/end.png",map:p,anchor:"bottom-center"}),a=[],o=0,i=t.segments.length;o<i;o++){var s=t.segments[o],r=null;"WALK"===s.transit_mode?(r=new AMap.Polyline({path:s.transit.path,isOutline:!0,outlineColor:"#ffeeee",borderWeight:2,strokeWeight:5,strokeColor:"grey",strokeOpacity:1,lineJoin:"round",strokeStyle:"dashed"}),p.add(r),a.push(r)):"SUBWAY"!==s.transit_mode&&"BUS"!==s.transit_mode||(r=new AMap.Polyline({path:s.transit.path,isOutline:!0,outlineColor:"#ffeeee",borderWeight:2,strokeWeight:5,strokeColor:"#0091ff",strokeOpacity:1,lineJoin:"round",strokeStyle:"solid"}),p.add(r),a.push(r))}p.setFitView([e,n].concat(a))}(t)}var p=null,i="",s="",r=null,c=null,d=[];t.on("click",function(){var t,e,n,a=$(this).data();a&&a.posi&&"0,0"!==a.posi&&a.addr&&a.name&&(t=a.posi,e=a.addr,n=a.name,$(".drawer-map").find(".js-addr").text(e),$(".drawer-map").find(".drawers").removeClass("fadeOutRight").addClass("fadeInRight").end().show(),window.AMap?o(t,e,n):$.getScript("https://webapi.amap.com/maps?v=2.0&key=c13e581b16bcce4e18fe990557d158e7",function(){o(t,e,n)}))}),$(".drawer-map .cap .icon-zuobian").on("click",function(){var t=$(".drawer-map");t.find(".drawers").removeClass("fadeInRight").addClass("fadeOutRight"),draw_timer=setTimeout(function(){t.hide()},500)}),$(".drawer-map .cont .js-zoomin").on("click",function(){p&&p.zoomIn()}),$(".drawer-map .cont .js-zoomout").on("click",function(){p&&p.zoomOut()}),$(".drawer-map .cont .js-fitview").on("click",function(){p&&p.setFitView()}),$(".drawer-map .cont .js-navmode li").on("click",function(){var t=$(this).data("type"),e=$(this).find("span").text();e&&"暂无"!==e&&($(this).addClass("check").siblings("li").removeClass("check"),1==+t?a(d[+t].plans[0]):n(d[+t].routes[0]))}),$(".drawer-map .cont .js-useapp").on("click",function(){$(".popup-puapp").show()}),$(".popup-puapp .main p").on("click",function(){var t,e,n,a=$(this).data("app");function o(t,e){var n=3e3*Math.PI/180,a=e,e=t,t=Math.sqrt(a*a+e*e)+2e-5*Math.sin(e*n),a=Math.atan2(e,a)+3e-6*Math.cos(a*n),n=t*Math.cos(a)+.0065;return t*Math.sin(a)+.006+","+n}a&&($(".popup-puapp").hide(),t=a,e="",a=-1<(n=navigator.userAgent).indexOf("Android")||-1<n.indexOf("Adr"),n=!!n.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),n=a?"android":n?"ios":"other","amap"===t?"android"==n?e="androidamap://viewMap?sourceApplication=cn.com.bjx.mhr&poiname="+encodeURI(i)+"&lat="+r.lat+"&lon="+r.lng+"&dev=0":"ios"==n&&(e="iosamap://viewMap?sourceApplication=cn.com.bjx.mhr&poiname="+encodeURI(i)+"&lat="+r.lat+"&lon="+r.lng+"&dev=0"):"bdmap"===t?"android"==n?e="bdapp://map/marker?location="+o(r.lat,r.lng)+"&title="+encodeURI(i)+"&content="+encodeURI(s)+"&traffic=on&src=cn.com.bjx.mhr":"ios"==n&&(e="baidumap://map/marker?location="+o(r.lat,r.lng)+"&title="+encodeURI(i)+"&content="+encodeURI(s)+"&traffic=on&src=cn.com.bjx.mhr"):"qqmap"===t&&(e="qqmap://map/marker?marker=coord:"+r.lat+","+r.lng+";title:"+encodeURI(i)+";addr:"+encodeURI(s)+"&referer=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77"),e&&(location.href=e))})}(),$(".bjx-copsAddr .body > p").on("click",function(){$(".bjx-copsAddr .body").toggleClass("active")}),$(".bjx-copsLead .body li").on("click",function(){var t=$(this).find("img").attr("src"),e=$(this).find("h5").text(),n=$(this).find("p").attr("title");$(".popup-leader").find(".main").html('<img src="'+t+'"><h5>'+e+"</h5><div>"+n+"</div>").end().show()}),$(".popups .close").click(function(){$(this).parents(".popups").parent("div").hide()}),$(".popups").click(function(t){t.currentTarget===t.target&&$(this).parent("div").hide()});var n=0;$(".bjx-copsTab span").on("click",function(){$(this).addClass("check").siblings("span").removeClass("check");var t=$(".bjx-copsTab span").index(this);$(".bjx-copsBox > div").removeClass("check").eq(t).addClass("check"),n=t});var t=location.hash;"#2"!==t&&"#3"!==t||(a=+t.replace("#",""),$(".bjx-copsTab span").eq(a-1).trigger("click"));var a=(o.prototype.init=function(){this.$dom=$(this.xpath);var t=this.$dom.data()||{},e=this.opts||{};this.paging=this.$dom.find(".js-paging").data("paging")||"",this.ldimg=e.ldimg||t.ldimg||"",this.type=e.type||t.type||"POST",this.data={},this.data_extend="",t.data&&("object"===_typeof(t.data)?$.extend(this.data,t.data):"string"==typeof t.data&&(this.data_extend=t.data)),e.data&&("object"===_typeof(e.data)?$.extend(this.data,e.data):"string"==typeof e.data&&(this.data_extend=e.data))},o.prototype.setLoading=function(t){this.loading=t||0,this.$dom.find(".more").remove(),t&&this.$dom.append('<div class="more"><img src="'+this.ldimg+'"></div>')},o.prototype.setEnded=function(t){this.$dom.find(".more").remove(),t&&this.$dom.append('<div class="more"><p>暂无更多数据</p></div>')},o.prototype.getMore=function(i,a){if(!this.loading&&(this.loading=1,i||!this.$dom.has(".empty").length)){var t=1;if(!i&&this.paging){if(!(this.paging.PageIndex+1<=this.paging.TotalPage))return void this.setEnded(1);t=this.paging.PageIndex=this.paging.PageIndex+1}this.setLoading(1);var s=this,e=$.extend({},this.data);$.extend(e,window[this.data_extend]),$.extend(e,{index:t}),$.ajax({url:this.api,type:this.type,data:e,cache:!1}).done(function(t,e,n){if(/html/.test(n.getResponseHeader("content-type"))){var a=$(t);0<a.children().length?(s.paging=a.filter(".js-paging").data("paging")||"",i?s.$dom.html(a):s.$dom.append(a),s.setLoading(0)):s.setEnded(1)}else if(/json/.test(n.getResponseHeader("content-type")))try{var o;600===(t=JSON.parse(t)).status?msg_confirm("登录后才能进行相关操作",{btn1_txt:"马上登录",btn1_fun:function(){location.href="/oidc/login/"}}):601===t.status?location.href=t.data:(o=t.data&&t.data.Error?t.data.Error:t.message,msg_alert(o))}catch(t){}}).always(function(t,e,n){if(a)try{a(t,e,n)}catch(t){}})}},o);function o(t,e,n){t&&e&&(this.loading=0,this.xpath=t||"",this.api=e||"",this.opts=n||"",this.init())}var i=new a(".bjx-copsMore .body","/api/snippet/companys_more"),s=new a(".bjx-copsJob","/api/snippet/companys_jobs"),r=new a(".bjx-copsEval","/api/snippet/companys_evas");$(function(){$(window).on("resize scroll",function(){var t=$(window).height(),e=$(window).scrollTop();$(document).height()-50<=e+t&&(0===n?i&&i.getMore():1===n?s&&s.getMore():2===n&&r&&r.getMore())})}),$(".bjx-copsDep a").on("click",function(){$(this).addClass("check").siblings("a").removeClass("check");var t=net_loading();s.data.dep=+$(this).data("dep"),s.getMore(1,function(){t.remove()})}),$(".bjx-copsGrade, .bjx-copsEval").on("click",'[class|="star"]',function(){var t=$(this).data();$(".popup-grade .main i").each(function(){$(this).attr("class","star-"+t[this.id.replace("star_","")])}),$(".popup-grade").show()}),$(".bjx-copsEval").on("click",".funs span",function(){var t,e=$(this);e.hasClass("check")||e.data("loading")||(e.data("loading",!0),t={eid:e.data("id")},$.ajax({url:"/api/like_evaluate/",type:"GET",data:t,cache:!1,dataType:"json"}).done(function(t){1===t.status?e.addClass("check"):600===t.status?msg_confirm("登录后才能进行相关操作",{btn1_txt:"马上登录",btn1_fun:function(){location.href="/oidc/login/"}}):601===t.status?location.href=t.data:t.data&&1211===t.data.HttpStatusCode&&msg_hint("您已经赞过了",{type:"error"})}).always(function(){e.data("loading",!1)}))})}();