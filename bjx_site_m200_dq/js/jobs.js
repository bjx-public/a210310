function _construct(t,e,a){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(t,e,a){var n=[null];n.push.apply(n,e);n=new(Function.bind.apply(t,n));return a&&_setPrototypeOf(n,a.prototype),n}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(a="Object"===a&&t.constructor?t.constructor.name:a)||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){$(".bjx-jobsDesc .fold").on("click",function(){$(".bjx-jobsDesc .box").toggleClass("active")}),$(".bjx-jobsBar .js-collect").on("click",function(){var e,a=$(this);a.data("loading")||(a.data("loading",!0),e={jid:a.data("id"),act:+!a.hasClass("active")},$.ajax({url:"/api/collect_job/",type:"GET",data:e,cache:!1,dataType:"json"}).done(function(t){1===t.status?e.act?(msg_hint("收藏成功",{type:"success"}),a.html("已收藏").addClass("active")):(msg_hint("取消收藏"),a.html("收藏").removeClass("active")):600===t.status?msg_confirm("登录后才能进行相关操作",{btn1_txt:"马上登录",btn1_fun:function(){location.href="/oidc/login/"}}):601===t.status&&(location.href=t.data)}).always(function(){a.data("loading",!1)}))}),$(".bjx-jobsBar .js-deliver").on("click",function(){var t=$(this),e=t.data();t.hasClass("active")||(t=e.url+"/delivery",e.type?t+="/table?jid="+e.id:t+="?jid="+e.id,window.open(t))});var a=(t.prototype.init=function(){this.$dom=$(this.xpath);var t=this.$dom.data()||{},e=this.opts||{};this.paging=this.$dom.find(".js-paging").data("paging")||"",this.ldimg=e.ldimg||t.ldimg||"",this.type=e.type||t.type||"POST",this.data={},this.data_extend="",t.data&&("object"===_typeof(t.data)?$.extend(this.data,t.data):"string"==typeof t.data&&(this.data_extend=t.data)),e.data&&("object"===_typeof(e.data)?$.extend(this.data,e.data):"string"==typeof e.data&&(this.data_extend=e.data))},t.prototype.setLoading=function(t){this.loading=t||0,this.$dom.find(".more").remove(),t&&this.$dom.append('<div class="more"><img src="'+this.ldimg+'"></div>')},t.prototype.setEnded=function(t){this.$dom.find(".more").remove(),t&&this.$dom.append('<div class="more"><p>暂无更多数据</p></div>')},t.prototype.getMore=function(i,n){if(!this.loading&&(this.loading=1,i||!this.$dom.has(".empty").length)){var t=1;if(!i&&this.paging){if(!(this.paging.PageIndex+1<=this.paging.TotalPage))return void this.setEnded(1);t=this.paging.PageIndex=this.paging.PageIndex+1}this.setLoading(1);var r=this,e=$.extend({},this.data);$.extend(e,window[this.data_extend]),$.extend(e,{index:t}),$.ajax({url:this.api,type:this.type,data:e,cache:!1}).done(function(t,e,a){if(/html/.test(a.getResponseHeader("content-type"))){var n=$(t);0<n.children().length?(r.paging=n.filter(".js-paging").data("paging")||"",i?r.$dom.html(n):r.$dom.append(n),r.setLoading(0)):r.setEnded(1)}else if(/json/.test(a.getResponseHeader("content-type")))try{var o;600===(t=JSON.parse(t)).status?msg_confirm("登录后才能进行相关操作",{btn1_txt:"马上登录",btn1_fun:function(){location.href="/oidc/login/"}}):601===t.status?location.href=t.data:(o=t.data&&t.data.Error?t.data.Error:t.message,msg_alert(o))}catch(t){}}).always(function(t,e,a){if(n)try{n(t,e,a)}catch(t){}})}},t);function t(t,e,a){t&&e&&(this.loading=0,this.xpath=t||"",this.api=e||"",this.opts=a||"",this.init())}var o,i,n=new a(".bjx-jobsMore .body","/api/snippet/jobs_more");function r(){$(".drawer-hr").find(".drawers").removeClass("fadeOutRight").addClass("fadeInRight").end().show();var t=new a(".drawer-hr .cont .body","/api/snippet/jobs_hr_more");$(".drawer-hr .cont").on("scroll",function(){this.scrollTop>=this.scrollHeight-this.clientHeight-10&&t&&t.getMore()})}function s(t){$(".drawer-eval").find(".drawers").removeClass("fadeOutRight").addClass("fadeInRight").end().show();var e=new a(".drawer-eval .cont .main","/api/snippet/jobs_eval_more",{data:{id:t}});$(".drawer-eval .cont").on("scroll",function(){this.scrollTop>=this.scrollHeight-this.clientHeight-10&&e&&e.getMore()})}$(function(){$(window).on("resize scroll",function(){var t=$(window).height(),e=$(window).scrollTop();$(document).height()-50<=e+t&&n&&n.getMore()})}),$(".popups .close").click(function(){$(this).parents(".popups").parent("div").hide()}),$(".popups").click(function(t){t.currentTarget===t.target&&$(this).parent("div").hide()}),o=0,$(".bjx-jobsHr .box").on("click",function(){var n,t=$(this).data("id");+t&&o!==+t||0===o?(n=+t,$.ajax({url:"/api/section/jobs_hr",type:"GET",data:{id:n},cache:!1}).done(function(t,e,a){/html/.test(a.getResponseHeader("content-type"))&&(o=n,$(".drawer-hr .main").empty().append(t),r())})):r()}),$(".drawer-hr .cap .icon-zuobian").on("click",function(){var t=$(".drawer-hr");t.find(".drawers").removeClass("fadeInRight").addClass("fadeOutRight"),draw_timer=setTimeout(function(){t.hide()},500)}),i=0,$(".bjx-jobsEval .body p").on("click",function(){var n,t=$(this).data("id");+t&&i!==+t||0===i?(n=+t,$.ajax({url:"/api/snippet/jobs_eval_more",type:"POST",data:{id:n},cache:!1}).done(function(t,e,a){/html/.test(a.getResponseHeader("content-type"))&&(i=n,$(".drawer-eval .main").empty().append(t),s(n))})):s(t)}),$(".drawer-eval .cap .icon-zuobian").on("click",function(){var t=$(".drawer-eval");t.find(".drawers").removeClass("fadeInRight").addClass("fadeOutRight"),draw_timer=setTimeout(function(){t.hide()},500)}),$(".drawer-eval .cont").on("click",'[class|="star"]',function(){var t=$(this).data();$(".popup-grade .main i").each(function(){$(this).attr("class","star-"+t[this.id.replace("star_","")])}),$(".popup-grade").show()}),$(".drawer-eval .cont").on("click",".funs span",function(){var t,e=$(this);e.hasClass("check")||e.data("loading")||(e.data("loading",!0),t={eid:e.data("id")},$.ajax({url:"/api/like_evaluate/",type:"GET",data:t,cache:!1,dataType:"json"}).done(function(t){1===t.status?e.addClass("check"):600===t.status?msg_confirm("登录后才能进行相关操作",{btn1_txt:"马上登录",btn1_fun:function(){location.href="/oidc/login/"}}):601===t.status?location.href=t.data:t.data&&1211===t.data.HttpStatusCode&&msg_hint("您已经赞过了",{type:"error"})}).always(function(){e.data("loading",!1)}))}),function(){var t=$(".bjx-jobsCop .body dd");if(0===t.length)return console.log("无需初始化地图");function o(t,e,a){i=a,r=e,s=_construct(AMap.LngLat,_toConsumableArray(t.split(",").map(function(t){return+t}).slice(0,2))),c&&c.destroy(),c=new AMap.Map("map_container",{resizeEnable:!0,center:s,zoom:16}),new AMap.Marker({map:c,position:s,anchor:"bottom-center"}),c.on("complete",function(){c.plugin("AMap.Geolocation",function(){var t=new AMap.Geolocation({position:"LB",timeout:1e4,offset:[20,20],showButton:!1,showCircle:!1,panToLocation:!1,needAddress:!0});c.addControl(t),t.getCurrentPosition(function(t,e){"complete"===t&&"SUCCESS"===e.info?(d=e.position,(t=AMap.GeometryUtil.distance(s,d))<1e3?$(".drawer-map").find(".js-dist").text("距离"+parseInt(t)+"米"):$(".drawer-map").find(".js-dist").text("距离"+(t/1e3).toFixed(1)+"千米"),new AMap.Marker({map:c,position:d,content:"<div></div>",anchor:"bottom-center"}),c.setFitView(),n(e.addressComponent.city||e.addressComponent.province)):console.log("暂时无法定位")})})});var n=function(t){c.plugin("AMap.Driving",function(){(new AMap.Driving).search(d,s,function(t,e){var a;"complete"===t&&"OK"===e.info?(a=(p[0]=e).routes[0].time||0,a=((t=parseInt(a/3600))?t+"小时":"")+((t=parseInt(a%3600/60))?t+"分钟":"")+((a=a%60)?a+"秒":""),$(".drawer-map").find(".js-deive-time").text(a)):console.error("获取驾车数据失败："+e)})}),c.plugin("AMap.Transfer",function(){new AMap.Transfer({city:t,autoFitView:!0}).search(d,s,function(t,e){var a;"complete"===t?(a=(p[1]=e).plans[0].time||0,a=((t=parseInt(a/3600))?t+"小时":"")+((t=parseInt(a%3600/60))?t+"分钟":"")+((a=a%60)?a+"秒":""),$(".drawer-map").find(".js-bus-time").text(a)):console.error("公交路线数据查询失败"+e)})}),c.plugin("AMap.Walking",function(){(new AMap.Walking).search(d,s,function(t,e){var a;"complete"===t&&"ok"===e.info?(a=(p[2]=e).routes[0].time||0,a=((t=parseInt(a/3600))?t+"小时":"")+((t=parseInt(a%3600/60))?t+"分钟":"")+((a=a%60)?a+"秒":""),$(".drawer-map").find(".js-walk-time").text(a)):console.error("步行路线数据查询失败"+e)})})}}function a(t){var e,a;c.clearMap(),a=function(t){for(var e=[],a=0,n=t.steps.length;a<n;a++)for(var o=t.steps[a],i=0,r=o.path.length;i<r;i++)e.push(o.path[i]);return e}(e=t),t=new AMap.Marker({position:a[0],icon:"https://webapi.amap.com/theme/v1.3/markers/n/start.png",map:c,anchor:"bottom-center"}),e=new AMap.Marker({position:a[a.length-1],icon:"https://webapi.amap.com/theme/v1.3/markers/n/end.png",map:c,anchor:"bottom-center"}),a=new AMap.Polyline({path:a,isOutline:!0,outlineColor:"#ffeeee",borderWeight:2,strokeWeight:5,strokeOpacity:.9,strokeColor:"#0091ff",lineJoin:"round"}),c.add(a),c.setFitView([t,e,a])}function n(t){c.clearMap(),function(t){for(var e=new AMap.Marker({position:t.segments[0].transit.origin,icon:"https://webapi.amap.com/theme/v1.3/markers/n/start.png",map:c,anchor:"bottom-center"}),a=new AMap.Marker({position:t.segments[t.segments.length-1].transit.destination,icon:"https://webapi.amap.com/theme/v1.3/markers/n/end.png",map:c,anchor:"bottom-center"}),n=[],o=0,i=t.segments.length;o<i;o++){var r=t.segments[o],s=null;"WALK"===r.transit_mode?(s=new AMap.Polyline({path:r.transit.path,isOutline:!0,outlineColor:"#ffeeee",borderWeight:2,strokeWeight:5,strokeColor:"grey",strokeOpacity:1,lineJoin:"round",strokeStyle:"dashed"}),c.add(s),n.push(s)):"SUBWAY"!==r.transit_mode&&"BUS"!==r.transit_mode||(s=new AMap.Polyline({path:r.transit.path,isOutline:!0,outlineColor:"#ffeeee",borderWeight:2,strokeWeight:5,strokeColor:"#0091ff",strokeOpacity:1,lineJoin:"round",strokeStyle:"solid"}),c.add(s),n.push(s))}c.setFitView([e,a].concat(n))}(t)}var c=null,i="",r="",s=null,d=null,p=[];t.on("click",function(){var t,e,a,n=$(this).data();n&&n.posi&&"0,0"!==n.posi&&n.addr&&n.name&&(t=n.posi,e=n.addr,a=n.name,$(".drawer-map").find(".js-addr").text(e),$(".drawer-map").find(".drawers").removeClass("fadeOutRight").addClass("fadeInRight").end().show(),window.AMap?o(t,e,a):$.getScript("https://webapi.amap.com/maps?v=2.0&key=c13e581b16bcce4e18fe990557d158e7",function(){o(t,e,a)}))}),$(".drawer-map .cap .icon-zuobian").on("click",function(){var t=$(".drawer-map");t.find(".drawers").removeClass("fadeInRight").addClass("fadeOutRight"),draw_timer=setTimeout(function(){t.hide()},500)}),$(".drawer-map .cont .js-zoomin").on("click",function(){c&&c.zoomIn()}),$(".drawer-map .cont .js-zoomout").on("click",function(){c&&c.zoomOut()}),$(".drawer-map .cont .js-fitview").on("click",function(){c&&c.setFitView()}),$(".drawer-map .cont .js-navmode li").on("click",function(){var t=$(this).data("type"),e=$(this).find("span").text();e&&"暂无"!==e&&($(this).addClass("check").siblings("li").removeClass("check"),1==+t?n(p[+t].plans[0]):a(p[+t].routes[0]))}),$(".drawer-map .cont .js-useapp").on("click",function(){$(".popup-puapp").show()}),$(".popup-puapp .main p").on("click",function(){var t,e,a,n=$(this).data("app");function o(t,e){var a=3e3*Math.PI/180,n=e,e=t,t=Math.sqrt(n*n+e*e)+2e-5*Math.sin(e*a),n=Math.atan2(e,n)+3e-6*Math.cos(n*a),a=t*Math.cos(n)+.0065;return t*Math.sin(n)+.006+","+a}n&&($(".popup-puapp").hide(),t=n,e="",n=-1<(a=navigator.userAgent).indexOf("Android")||-1<a.indexOf("Adr"),a=!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),a=n?"android":a?"ios":"other","amap"===t?"android"==a?e="androidamap://viewMap?sourceApplication=cn.com.bjx.mhr&poiname="+encodeURI(i)+"&lat="+s.lat+"&lon="+s.lng+"&dev=0":"ios"==a&&(e="iosamap://viewMap?sourceApplication=cn.com.bjx.mhr&poiname="+encodeURI(i)+"&lat="+s.lat+"&lon="+s.lng+"&dev=0"):"bdmap"===t?"android"==a?e="bdapp://map/marker?location="+o(s.lat,s.lng)+"&title="+encodeURI(i)+"&content="+encodeURI(r)+"&traffic=on&src=cn.com.bjx.mhr":"ios"==a&&(e="baidumap://map/marker?location="+o(s.lat,s.lng)+"&title="+encodeURI(i)+"&content="+encodeURI(r)+"&traffic=on&src=cn.com.bjx.mhr"):"qqmap"===t&&(e="qqmap://map/marker?marker=coord:"+s.lat+","+s.lng+";title:"+encodeURI(i)+";addr:"+encodeURI(r)+"&referer=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77"),e&&(location.href=e))})}()}();